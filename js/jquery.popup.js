!function(p){"use strict";function o(){!this.options.modal&&this.close()}function t(){this.$popup.add(this.$overlay).removeClass("popup-show")}p.popup=function(t,i){var s;this.$popup=p(t).addClass("popup"),this.$popup.data("popup")instanceof p.popup&&this.$popup.data("popup").destroy(),this.config(i),this.$overlay=p(this.$popup.next(".popup-overlay").get(0)||'<div class="popup-overlay" data-popup-js="" />').insertAfter(this.$popup),s=this.$popup.add(this.$overlay).data("popup",this),i.bubble&&p("body").append(s),this.$overlay.on("click",p.proxy(o,this)),this._realign=function(p){return function(){p.realign()}}(this),p(window).on("resize",this._realign)},p.popup.prototype.defaultOptions={modal:!1,bubble:!0,open:function(){},close:function(){},realign:function(){}},p.popup.prototype.options={},p.popup.prototype.$popup=null,p.popup.prototype.$overlay=null,p.popup.prototype.config=function(o){return this.options=p.extend({},this.defaultOptions,this.options,o),this},p.popup.prototype.overlay=function(){return this.$overlay.hasClass("popup-show")||(p(".popup.popup-show").after(this.$overlay),this.$overlay.addClass("popup-show")),this},p.popup.prototype.open=function(){return this.options.open instanceof Function&&this.options.open.call(this.$popup.get(0)),this.overlay().$overlay.after(this.$popup),this.realign().$popup.addClass("popup-show"),this},p.popup.prototype.realign=function(){var p=this.options.realign;return p instanceof Function&&p.call(this.$popup.get(0)),this.$popup.css({"margin-top":"-71px","margin-left":"-"+this.$popup.outerWidth(!1)/2+"px"}),this},p.popup.prototype.close=function(o){return void 0!==o?setTimeout(p.proxy(this.close,this),0|Math.abs(Number(o))):(this.options.close instanceof Function&&this.options.close.call(this.$popup.get(0)),t.call(this)),this},p.popup.prototype.destroy=function(){return t.call(this),p(window).off("resize",this._realign),this.$overlay.off("click",p.proxy(o,this)),this.$popup.add(this.$overlay).removeData("popup").filter("[data-popup-js]").remove(),this.$popup},p.fn.popup=function(o){return this.each(function(t,i){new p.popup(i,void 0===o?{}:o)})},p(document).on("click",".popup-close",function(o){var t=p(o.target).closest(".popup, .popup-overlay").eq(0);o.preventDefault(),t.length&&t.data("popup")instanceof p.popup&&t.data("popup").close()})}(jQuery);
